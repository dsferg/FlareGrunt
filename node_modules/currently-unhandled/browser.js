"use strict";function unwrapEvent(event){return event&&event.detail&&event.detail.promise?event.detail:event}var core=require("./core");module.exports=function(w){w=w||window;var c=core();return w.addEventListener("unhandledrejection",function(event){event=unwrapEvent(event),c.onUnhandledRejection(event.reason,event.promise)}),w.addEventListener("rejectionhandled",function(event){event=unwrapEvent(event),c.onRejectionHandled(event.promise)}),c.currentlyUnhandled};