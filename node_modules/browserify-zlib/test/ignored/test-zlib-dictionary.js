function run(num){var inflate=zlib.createInflate({dictionary:spdyDict});2===num&&(deflate.reset(),deflate.removeAllListeners("data")),deflate.on("data",function(chunk){inflate.write(chunk)});var output=[];inflate.on("data",function(chunk){output.push(chunk)}),inflate.on("end",function(){called++,assert.equal(output.join(""),input),num<2&&run(num+1)}),deflate.write(input),deflate.flush(function(){inflate.end()})}var common=require("../common.js"),assert=require("assert"),zlib=require("zlib"),path=require("path"),spdyDict=new Buffer(["optionsgetheadpostputdeletetraceacceptaccept-charsetaccept-encodingaccept-","languageauthorizationexpectfromhostif-modified-sinceif-matchif-none-matchi","f-rangeif-unmodifiedsincemax-forwardsproxy-authorizationrangerefererteuser","-agent10010120020120220320420520630030130230330430530630740040140240340440","5406407408409410411412413414415416417500501502503504505accept-rangesageeta","glocationproxy-authenticatepublicretry-afterservervarywarningwww-authentic","ateallowcontent-basecontent-encodingcache-controlconnectiondatetrailertran","sfer-encodingupgradeviawarningcontent-languagecontent-lengthcontent-locati","oncontent-md5content-rangecontent-typeetagexpireslast-modifiedset-cookieMo","ndayTuesdayWednesdayThursdayFridaySaturdaySundayJanFebMarAprMayJunJulAugSe","pOctNovDecchunkedtext/htmlimage/pngimage/jpgimage/gifapplication/xmlapplic","ation/xhtmltext/plainpublicmax-agecharset=iso-8859-1utf-8gzipdeflateHTTP/1",".1statusversionurl\0"].join("")),deflate=zlib.createDeflate({dictionary:spdyDict}),input=["HTTP/1.1 200 Ok","Server: node.js","Content-Length: 0",""].join("\r\n"),called=0;run(1),process.on("exit",function(){assert.equal(called,2)});