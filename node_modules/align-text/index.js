"use strict";var typeOf=require("kind-of"),repeat=require("repeat-string"),longest=require("longest");module.exports=function(val,fn){var lines,type=typeOf(val);if("array"===type)lines=val;else{if("string"!==type)throw new TypeError("align-text expects a string or array.");lines=val.split(/(?:\r\n|\n)/)}for(var fnType=typeOf(fn),len=lines.length,max=longest(lines),res=[],i=0;len--;){var diff,line=String(lines[i++]);if(diff="function"===fnType?fn(line.length,max.length,line,lines,i):"number"===fnType?fn:max.length-line.length,"number"===typeOf(diff))res.push(repeat(" ",diff)+line);else if("object"===typeOf(diff)){var result=repeat(diff.character||" ",diff.indent||0);res.push((diff.prefix||"")+result+line)}}return"array"===type?res:res.join("\n")};